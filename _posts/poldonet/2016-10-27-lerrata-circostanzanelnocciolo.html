---
layout: post
title: l_errata_circostanza_nel_nocciolo
date: '2016-10-27T06:14:00.001-07:00'
author: leopoldo
tags:
- kernel
- bash
- initramfs
- system
modified_time: '2016-10-27T06:51:47.291-07:00'
blogger_id: tag:blogger.com,1999:blog-8346769986915011049.post-4731193584091202446
blogger_orig_url: http://poldonet.blogspot.com/2016/10/lerrata-circostanzanelnocciolo.html
---

Capita che per sfizio, curiosità, esigenze si abbia voglia di metter mano dove non si deve o si conosce poco. Al che il calcolo, il quale ignora la nostra volontà esegue indisturbato le sue azioni.<br /><br />Tale attività fruttifica in modo errato e produce dati inesatti.<br /><br />Questo avviene per progresso, del quale i risultati sono difficile da capire.<br /><br />Dunque ho ricompilato il kernel 4.8.4 ultima versione stabile il mi ha dato qualche pensiero poiché initramfs continuava a non trovare i moduli, nonostante la compilazione andasse a buon fine senza particolari avvisi di guasti vari.<br /><br />Ogni volta che installavo <b>make install</b> ricevevo un messaggio di errore sui moduli ma l'installazione proseguiva e grub veniva aggiornato con tutti i suoi filettini di avvio(-: initrd, system.map, vmlinuz.<br /><br />cercando di capire cosa avesse l'initrd, ho fatto la classica operazione a cuore aperto<br /><br /><b>mv initrd-4.8.4  initrd-4.8.4.gz</b><br /><b>gzip -d initrd-initrd-4.8.4.gz</b><br /><b>cpio -i &lt; initrd-4.8.4</b><br /><br />e ho ravanato dentro rigenerando il file sperando in un miglior avvio <br /><br /><b>find . | cpio -H newc -o &gt; ../initrd-4.8.4 <br />cat initrd-4.8.4| gzip &gt; initrd-4.8.4.gz </b><br />nel vano tentativo di veder marciare il nuovo kernel.<br /><br />Dato i fallimenti al initrd, sono andato a vedere i moduli o meglio la loro dichiarazione sotto <b>/lib/modules/4.8.4/</b>. Li sotto si trova il kernel è tutto cio di cui ha bisogno di cui la famiglia di files <b>modules.xxx</b> i quali risultavano stranamente a 0 o scarsamente popolati. Il che fa pensare una scorretta sequenza di <b>make,</b> che fare?<br /><br /><br />Procedendo per l'ennesima volta a pulire, instanziare, compilare<br />passo dopo passo, verifico lo stato della dolce famigliola che col <b>make modules</b> ritrova il suo stato consistente. <br /><br /><b><br /></b><b>&nbsp;ls /lib/modules/4.8.4/ -l<br />total 3832<br />lrwxrwxrwx&nbsp; 1 root root&nbsp;&nbsp;&nbsp;&nbsp; 20 Oct 26 17:15 build -&gt; /usr/src/linux-4.8.4<br />drwxr-xr-x 11 root root&nbsp;&nbsp; 4096 Oct 26 17:17 kernel<br />-rw-r--r--&nbsp; 1 root root 961211 Oct 26 17:30 modules.alias<br />-rw-r--r--&nbsp; 1 root root 921924 Oct 26 17:30 modules.alias.bin<br />-rw-r--r--&nbsp; 1 root root&nbsp;&nbsp; 3665 Oct 26 17:15 modules.builtin<br />-rw-r--r--&nbsp; 1 root root&nbsp;&nbsp; 4989 Oct 26 17:30 modules.builtin.bin<br />-rw-r--r--&nbsp; 1 root root 365372 Oct 26 17:30 modules.dep<br />-rw-r--r--&nbsp; 1 root root 501408 Oct 26 17:30 modules.dep.bin<br />-rw-r--r--&nbsp; 1 root root&nbsp;&nbsp;&nbsp; 402 Oct 26 17:30 modules.devname<br />-rw-r--r--&nbsp; 1 root root 119150 Oct 26 17:15 modules.order<br />-rw-r--r--&nbsp; 1 root root&nbsp;&nbsp;&nbsp; 252 Oct 26 17:30 modules.softdep<br />-rw-r--r--&nbsp; 1 root root 449777 Oct 26 17:30 modules.symbols<br />-rw-r--r--&nbsp; 1 root root 558217 Oct 26 17:30 modules.symbols.bin<br />lrwxrwxrwx&nbsp; 1 root root&nbsp;&nbsp;&nbsp;&nbsp; 20 Oct 26 17:15 source -&gt; /usr/src/linux-4.8.4<br />drwxr-xr-x&nbsp; 3 root root&nbsp;&nbsp; 4096 Oct 26 17:30 updates</b><br /><br />Al make install ricevo il solito errore che i moduli non vanno bene, ma tanto vale un tentativo in più non riuscito poco male fa. Al riavvio, invece il sistema parte bello tranquillo tutto funziona, non devo fare nessuna modifica è tutto perfetto. Mi chiedo le differenze da prima non saranno solo !?-:<br /><br /><b>$uname -r<br />&nbsp;4.8.4</b><br />
---
layout: post
title: lab_1 cisco
date: '2008-02-04T06:58:00.000-08:00'
author: leopoldo
tags:
- emulatore
- cisco
modified_time: '2014-01-22T06:43:46.243-08:00'
thumbnail: http://bp0.blogger.com/_Nro3qO5srvk/R6co51FMutI/AAAAAAAAAAQ/NEcmXc09v40/s72-c/lan_acl1.GIF
blogger_id: tag:blogger.com,1999:blog-8346769986915011049.post-6842192856917552185
blogger_orig_url: http://poldonet.blogspot.com/2008/02/il-seguente-lab-ha-lo-scopo-di-mostrare.html
---

<a href="http://bp0.blogger.com/_Nro3qO5srvk/R6co51FMutI/AAAAAAAAAAQ/NEcmXc09v40/s1600-h/lan_acl1.GIF"><img alt="" border="0" src="http://bp0.blogger.com/_Nro3qO5srvk/R6co51FMutI/AAAAAAAAAAQ/NEcmXc09v40/s320/lan_acl1.GIF" id="BLOGGER_PHOTO_ID_5163140471770102482" style="cursor: hand; float: left; margin: 0px 10px 10px 0px;" /></a> Il seguente lab ha lo scopo di mostrare posibili discriminazioni negli accessi alle risorse condivisea livello di network.<br />Nel nostro caso applicheremo 2 acl una per isolare un server dal network, l'altra per scludere una landa una stampate, e la costruzione dei comandi.<br /><br />Aspetto fisico del network:<br /><br /><b>R0</b>, router che instrada la lan1 e contiene<br />un srv di backup che sarà accessibile<br />solo agli utenti della rete.<br /><b></b><br /><b>R2</b>, router che instrada la lan2 la quale<br />non potrà accedere alla stampante.<br /><b></b><br /><b>R3</b>, router che instrada le lan dei servizi,<br />verranno impostate le interfacce(fa0/0.1,...)<br />per la connessione del trunking.<br />switch, conterrà le vlan e il trunk su fa0/1 per connettere e separare le reti.<br /><br /><br /><b>Impostazione del network</b>:<br /><br />R3 impostiamo la rete dei servizi:<br />nello switch vanno configurate le vlan: 10,20,30<br /><br />Switch()# conf tSwitch(config)#vlan 10<br />Switch(config-vlan)#name mio10<br /><br />poi assegnare le vlan alle porte:<br /><br />Switch(config)#interface GigabitEthernet1/1<br />Switch(config-if)#switchport access vlan 30<br /><br />poi configuriamo il trunk sulla porte dove arriva i cavo(he,he,he,..)<br /><br />S2(config)#interface fastEthernet 0/1<br />S2(config-if)#switchport mode trunk<br />S2(config-if)#switchport trunk allowed vlan 1-1001<br /><br />poi andiamo sul router R3 e configuriamole interfacce logiche<br />col protocolo dotq1 più la vlan a cui riferirsi:<br /><br />R3(config)#interface FastEthernet0/0.3<br />R3(config-subif)#encapsulation dot1Q 10<br />R3(config-subif)#ip address 172.18.1.17 255.255.255.252<br /><br />abilitiamo la scheda fa0/0<br /><br />R3(config)#interface FastEthernet0/0<br />R3(config-if)#no shutdown<br /><br />e impostiamo un po' di routing statico:<br /><br />R3(config)#ip route 0.0.0.0 0.0.0.0 FastEthernet0/1<br />R3(config)#ip route 192.168.1.0 255.255.255.0 192.168.1.1<br /><br />R2 abbiamo detto che lan2 non accede alla stampante e che il resto e tutto permesso.<br /><br />Impostiamo la acl:<br /><br />R2(config)#ip access-list extended FW1<br />R2(config-ext-nacl)#deny ip 10.0.0.0 0.0.0.127 host 172.18.1.2<br />R2(config-ext-nacl)#permit ip any any<br /><br />la assegnamo alla scheda in questo caso in ingresso:<br /><br />R2(config-if)#ip access-group FW1 in<br /><br />e anche qui un po' di routing:<br /><br />R2(config)#ip route 10.0.0.0 255.255.255.248 193.0.0.1<br />R2(config)#ip route 172.18.0.0 255.255.0.0 FastEthernet0/1<br /><br />per la lan 172.18.0.0 255.255.0.0 ho sommarizzato tutti gli indirizzi<br />172.18 sarebbe sufficiente 172.18.1.0/31 nel nostro caso.<br /><br /><br />R0 contiene la lan1 con un srv di backup,non accessibile dall'esterno quindi:<br /><br />R0(config)#ip access-list extended FW1<br />R0(config-ext-nacl)#deny ip any host 10.0.0.9<br />R0(config-ext-nacl)#permit ip any any<br /><br />assegnamo alla scheda in uscita:<br /><br />R0(config-if)#ip access-group FW1 out<br /><br />e la solita route per le risorse:<br /><br />R0(config-if)#ip route 0.0.0.0 0.0.0.0 Serial0/0<br /><br /><br /><br />